# 開発メモ
- ミスをした際記録し、次に同じミスをした際にそこに記録、自分がどういうとこでミスしやすいかを把握することができたらいい。
把握のために分類をすべき。この概念は分かりにくいのであらかじめタグ(計算ミス、見逃し)等を用意しておき、随時ユーザー側で追加できるようにするのがいいかも。
しかしそのタグで記録した後タグを削除しようとすると困る。タグは編集可能にし、削除はそれを使ってる項目がないときに限る。
- その時の状況も大事。自分のコンディションは記録できるようにすべき。
- ミスの多さとかも減らしていきたいが、ミスを少なく記録することはいいことではない。ミスは成功への近道であることには変わりはない。記録するたびレベルアップすべきだ。
- 何より、楽しくミスを記録することが大事だ。ミスは気分のいいものじゃない。シンプルだが質素過ぎないUIにして、少しゲームっぽい感じがいい。ミスを大切にするんだ。それこそが意識することに繋がる。入力はホーム中央のボタンからできるようにする。ミス名、ミスタグ、問題の画像、コンディション(1～10のメーター＋メモ(任意))、改善案を書く欄。これがユーザーのインプット。
- アウトプットというかフィードバックでほしいのは(初期段階)、総合的としてまずミスタグの割合(円グラフ)と、ミスの多さ順で並べられたミスタイル(リスト形式)、さらにミスタグによるフィルターとして各ミスタグごとのミスの多さ順で並べられたミスタイル(リスト形式)など。
それからミスの減少具合もみたい。
- 数学特化の凡ミス対策アプリ。予めいくつかの選択肢を用意しておいて(計算ミス/符号間違い, 文章/読み間違い, …)、それに対するフィードバック文も用意しておく。
- AI搭載で対策問題制作？イメージしたら凡ミス対策としてはあんまりいらんかも。フィードバックの方が嬉しい。
- アプリ内ショップで数学グッズ？

# 要件定義書(MVP)

・アプリ名: OopsNote(オップスノート)

・ターゲットユーザー: 数学が好きだが凡ミスに苦戦している受験生(中高生)

・プラットフォーム: iOS, Android(Flutter)

・主要機能:
## ミス記録/インプット
- ミス名
- ミスタグ(複数可)
- 問題の画像(任意)
- コンディション(1～10のメーター＋メモ(任意))
- 改善案/意識すべきこと(任意)
## ミス記録/アウトプット
- ミスタグの割合(円グラフ)
- ミスの多さ順で並べられたミスタイル(リスト形式)
- ミスタグによるフィルターとして各ミスタグごとのミスの多さ順で並べられたミスタイル(リスト形式)
- ミスの減少具合(折れ線グラフ)
- ミス時のコンディション分析
- 総合フィードバック文
## ショップ(バナー広告)
- 数学グッズ販売

・インフラ要件: 
- ユーザーデータ保存(shared_preferences, supabase等)
- 画像保存(shared_preferences)
- 広告表示(手動作成し、supabaseで管理)
- ユーザー認証(supabase)
- API連携(GPT-4)

# 基本設計

・全体構成 # lib/home.dart
- ボトムナビゲーションバー(ホーム, ミス一覧, 分析, ショップ)

・ホーム画面 # screens/home/home_screen.dart
- 背景はノート風デザイン
- 画面上部にタイトル「OopsNote」
- 今日のミス数、累計ミス数表示
- 円形で「ミスった！」ボタン
- 最近のミス3件をカード形式で表示

・ミス記録シート # screens/record/record_sheet.dart
- 画面最大幅のモーダル
- ミス名入力欄(必須)
- ミスタグ選択欄(複数可、追加可、任意)
- 問題の画像添付欄(任意)
- 状況入力欄(任意)
- コンディションメーター(1～10、必須)
- 改善案入力欄(任意)
- 画面下部に「保存」ボタン
- 保存後、ホーム画面に戻る
- ダイアログが表示され、保存完了を通知

・ミス記録ダイアログ # screens/record/widgets/record_dialog.dart
- ミス記録完了を通知するダイアログ

・ミス一覧画面 # screens/mistake/mistake_list_screen.dart
- 画面上部にタイトル「ミス一覧」
- フィルター選択欄(ミスタグごと、追加、削除可)
- 画面中央から下部にかけてミスの多さ順で並べられたミスタイル(リスト形式)

・ミスタイル # screens/mistake/widgets/mistake_tile_widget.dart
- 左側にアイコン(ミスタグの代表的なもの)
- アイコン右側に縦並びでミス名、ミス回数
- 右端に>アイコン(詳細画面へ遷移)

・ミス詳細シート # screens/mistake/widgets/mistake_detail_sheet.dart
- 画面最大幅のモーダル
- ミス名表示
- ミスタグ表示(複数可)
- ミス回数表示
- 問題の画像表示(任意)
- コンディションメーター(1～10)
- コンディションメモ表示(任意)
- 改善案表示(任意)
- 画面下部に「閉じる」ボタン

・分析画面 # screens/analysis/analysis_screen.dart
- 画面上部にタイトル「分析」
- 画面中部から下部にかけて以下の要素を縦に配置
-- 総合フィードバック
# 以下は期間選択可能(1週間, 1ヶ月, 3ヶ月, 6ヶ月, 1年)
-- 円グラフ(ミスタグの割合), 円グラフ(ミス時のコンディション分析) # 横並び配置
-- 最も多いミスタイル3種
-- 折れ線グラフ(ミスの減少具合)

・ショップ画面 # screens/shop/shop_screen.dart
- 画面上部にタイトル「ショップ」
- 画面上部に課金案内バナー
- セクションごとの数学グッズのバナー広告(横スクロール可能)

・課金シート # screens/shop/widgets/purchase_sheet.dart
- 画面最大幅のモーダル
- 課金案内文
- 2つの課金プラン
- 画面下部に「購入」ボタン

・テーマ # themes/app_theme.dart
- フォント: Zen角ゴシックNew
- 背景色: f5f5f5
- 表面色: fafafa
- テキストカラー: grey[900], 191c2b(クールで知的)
- プライマリカラー: blue[500], 005dd3(クールで知的)
- セカンダリカラー: 0xFF589cd6(クールで知的)
- 絵文字ではなくlucideアイコンを使用
